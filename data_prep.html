
<!DOCTYPE html>
<html>
  <head>
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Spotify Analysis</title>
    <link rel="apple-touch-icon" sizes="180x180" href="/favicon.io/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon.io/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.io/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="icon" type="image/x-icon" href="/favicon.ico/">
    
    <script src="https://kit.fontawesome.com/4acb3cc904.js" crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Montserrat">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <style>
    .collapsible {
    background-color: #777;
    color: white;
    cursor: pointer;
    padding: 18px;
    width: 100%;
    border: none;
    text-align: left;
    outline: none;
    font-size: 15px;
  }
  
  .active, .collapsible:hover {
    background-color: #555;
  }
  
  .content {
    padding: 0 18px;
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.2s ease-out;
    background-color: #f1f1f1;
  }  
      
    body, h1,h2,h3,h4,h5,h6 {font-family: "Montserrat", sans-serif}
    .w3-row-padding img {margin-bottom: 12px}
    .bgimg {
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      background-image: url('https://raw.githubusercontent.com/ameliameyer/music_project/main/images/spotify_grey_logo.jpg');
      min-height: 100%;
    }
        </style>
  </head>
<body>

<!-- Sidebar with image -->
<nav class="w3-sidebar w3-hide-medium w3-hide-small" style="width:40%">
  <div class="bgimg"></div>
</nav>

<!-- Hidden Sidebar (reveals when clicked on menu icon)-->
<nav class="w3-sidebar w3-black w3-animate-right w3-xxlarge" style="display:none;padding-top:150px;right:0;z-index:2" id="mySidebar">
  <a href="javascript:void(0)" onclick="closeNav()" class="w3-button w3-black w3-xxxlarge w3-display-topright" style="padding:0 12px;">
    <i class="fa fa-remove"></i>
  </a>
  <div class="w3-bar-block w3-center">
    <a href="index.html" class="w3-bar-item w3-button w3-text-grey w3-hover-black" onclick="closeNav()">Home</a>
    <a href="packages.html" class="w3-bar-item w3-button w3-text-grey w3-hover-black" onclick="closeNav()">Packages</a> 
    <a href="data_prep.html" class="w3-bar-item w3-button w3-text-grey w3-hover-black" onclick="closeNav()">Data Prep</a>
    <a href="eda.html" class="w3-bar-item w3-button w3-text-grey w3-hover-black" onclick="closeNav()">EDA</a>
    <a href="clustering.html" class="w3-bar-item w3-button w3-text-grey w3-hover-black" onclick="closeNav()">Clustering</a>
    <a href="summary.html" class="w3-bar-item w3-button w3-text-grey w3-hover-black" onclick="closeNav()">Summary</a>
  </div>
</nav>

<!-- Page Content -->
<div class="w3-main w3-padding-large" style="margin-left:40%">

  <!-- Menu icon to open sidebar -->
  <span class="w3-button w3-top w3-white w3-xxlarge w3-text-grey w3-hover-text-black" style="width:auto;right:0;" onclick="openNav()"><i class="fa fa-bars"></i></span>

  <!-- Header -->
  <header class="w3-container w3-center" style="padding:128px 16px" id="home">
    <h1 class="w3-jumbo"><b>Data Prep</b></h1>
    <p>This page introduces the data and outlines the preprocessing steps I took in order to prepare my data for analysis.</p>
    <a href="https://github.com/ameliameyer/music_project" class="w3-button w3-black w3-padding-large w3-margin-top" target="_blank">
      <i class="fa fa-github-alt"></i> Github Repository
    </a>
    
  </header>

  <!-- Steps -->
  <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="steps">
    <h2>About the Datasets</h2>
    <hr class="w3-opacity">
    <p>
      The first dataset is comprised of my Liked Songs from Spotify. Liked songs are classified as those that received a 'like' which is in the shape of a heart on 
      Spotify. I extracted this data using <a href="https://spotipy.readthedocs.io/en/master/" target="_blank">Spotipy</a> which is a python library for the 
      <a href="https://developer.spotify.com/documentation/web-api/quick-start/" target="_blank">Spotify API</a>.
      </p>   
  
    <!-- Extracting the Data -->
    <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="import">
    <h2>Extracting the Data</h2>
    <hr class="w3-opacity">
    <p>
      The code for the Spotify initilization, along with my data preprocessing can be found 
      <a href="https://ameliameyer.github.io/music_project/data_prep_code.html" target="_blank">here</a>
      I extracted the track ids, names, artists, duration in milliseconds, popularity, and the date + time at which the song was added to my Liked Songs into a list
      titled track.<br></br> 
      Using this list, I created a dataframe liked_songs, then added the audio features for each track. 
      <a href="https://developer.spotify.com/documentation/web-api/reference/#/operations/get-several-audio-features" target="_blank">Spotify audio features</a> allow 
      you to perform deeper analysis on the tracks themselves. I chose to extract acousticness, speechiness, key, liveness, instrumentalness, energy, tempo, 
      time_signature, loudness, danceability, and valence.<br></br>
      Then, I added the genres associated with each artist in the form of a list. I selected the first 15 genres in the list of genres to get an idea of what is inclued
      in the dataset. 
    </p>
  
      <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p> 
        genres[:15]
        </p>
      </div>
      <blockquote style="border: 18px solid #d8d8d8; padding: 18px; background-color: #d8d8d8;"> 
      [['alt z', 'indie pop', 'pop'], <br>
      ['alt z', 'canadian contemporary r&b', 'neo mellow', 'pop'], <br>  
      ['hip hop', 'old school atlanta hip hop', 'rap'],  <br>
      ['dance pop', 'pop', 'pop dance', 'post-teen pop', 'talent show', 'uk pop'],  <br>
      ['social media pop'],  <br>
      ['modern rock', 'punk blues', 'rock'],  <br>
      [],  <br>
      ['country', 'country road'],  <br>
      ['adult standards',   <br>
       'bossa nova',  <br>
       'brazilian modern jazz',  <br>
       'contemporary vocal jazz',  <br>
       'jazz pop',  <br>
       'lounge',  <br>
       'piano mpb',  <br>
       'vocal jazz'],  <br>
      ['alternative rock', 'garage rock', 'modern rock', 'permanent wave', 'rock'], <br> 
      ['oklahoma country'],  <br>
      [],  <br>
      ['album rock',  <br>
        'beatlesque',  <br>
       'classic rock',  <br>
       'folk rock',  <br>
       'mellow gold',  <br>
       'rock',  <br>
       'soft rock'],  <br>
      ['pop'],  <br>
      ['adult standards', 'canadian pop', 'jazz pop', 'lounge']]    <br>
      </blockquote> 
  
  <p>Right off the bat, there are some trends to be noticed. There are several entries in the list here with 'pop' or 'rock'. There are also two entries that are empty
    lists. I decided to categorize this as other. I started by creating a copy of my genres, and replacing the empty genre lists with 'other'. Then I created a new 
    column genre_list and mapped the genre lists to the artists.</p> 
 
      <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p> 
        # we'll create a copy of our genres list <br>
        genres_copy = genres.copy()
        <br>
        # iterate through genres_copy and add the substitute other in empty lists<br>
        for genre_list in genres_copy:<br>
            if (genre_list == []):<br>
                genre_list.append('other')
        <br>
        # now that the empty lists have been replaced with 'other'<br>
        # create a dictionary for the artists and respective genres<br>
        artists_genres =  dict(zip(artists,genres_copy))
        <br>
        # create new column in liked_songs called genre_list and map artists_genres to it<br>
        liked_songs['genre_list'] = liked_songs['artists'].map(artists_genres)
        <br>
        # view the list of genres per artist<br>
        liked_songs.genre_list[:10]<br>
        </p>
      </div>
    <br>
    <p>
     The genre list for each artist is sorted in descending order by popularity. I extracted the first genre in the lists (most popular) into a new column 'genre'.
  </p>
      
     <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        # using list comprehension to get the first genre for each genre list in genres_copy<br>
        first_genre = [genre_list[0] for genre_list in genres_copy]
        <br>
        # create a dictionary for the artists and respective genres<br>
        artists_genre =  dict(zip(artists,first_genre))
        <br>
        # create new column in liked_songs called genre and map artists_genres to it<br>
        liked_songs['genre'] = liked_songs['artists'].map(artists_genre)
        </p>
      </div>
  
    <p>Finally, I added a new column 'pitch_class' which displays the readable pitches of each song. This is mapped to the key column. </p>
    <br>
    <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        # change the key col type to int <br>
        liked_songs['key'] = liked_songs['key'].astype('int') <br>
        <br>
        # create pitch class dictionary <br>
        pitch_classes = {0:'C/Do', 1:'C#/Do sost.', 2:'D/Re', 3:'D/Re sost.', 4:'E/Mi', 5:'F/Fa', 6:'F#/Fa sost.', 7:'G/Sol', 8:'G#/Sol sost.', 9:'A/La', 10:'A#/La sost.', 11:'B/Si'} <br>
        # create pitch class column and map it to the dictionary <br>
        liked_songs['pitch_class'] = liked_songs['key'].map(pitch_classes)
        </p>
      </div>
      
      <p>After extracting the data, I saved a copy. It's always good practice to have copies of your unchanged data to fall back on. </p>
      <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        # save an original copy of the dataset <br>
        liked_songs.to_csv('liked_songs_original.csv') <br>
        </p>
      </div>
    
    <p>Here you can see a sneak of the first 5 rows of the dataset.</p>
  
    <picture>
    <img src="images/liked_songs_original.png" alt="Original Liked Songs Dataset" style="width:900px;">
    </picture>
    
    <!-- Cleaning the Data -->
    <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="import">
    <h2>Cleaning the Data</h2>
    <hr class="w3-opacity">
    <p>
      After extracting the data, I saved a copy. It's always good practice to have copies of your unchanged data to fall back on. 
    </p>
    <br>
    <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        # save an original copy of the dataset<br>
        liked_songs.to_csv('liked_songs_original.csv')
        </p>
      </div>
    
      <!--Missing Data-->
      <p></p>
      <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        </p>
      </div>
      
      <!--Datetime-->
      <p></p>
      <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        </p>
      </div>
      
      <!--Describe-->
      <p></p>
      <button type="button" class="collapsible">Code</button>
      <div class="content">
      <p>
        </p>
      </div>
      
      <!--FIXME FIX THE ATTRIBUTE CHART BELOW-->
      
    <!-- Attributes -->
  <div class="w3-content w3-justify w3-text-grey w3-padding-32" id="import">
    <h2>Data Attributes</h2>
    <hr class="w3-opacity">  
      <!-- My Liked Songs Dataset -->
      <table>
<thead>
<tr>
<th> variable </th>
<th> description </th>
<th> range </th>
</tr>
</thead>
<tbody>
<tr>
<td> acousticness </td>
<td> is track acoustic? </td>
<td> confidence measure, [0.0,1.0] </td>
</tr>
<tr>
<td> added_at </td>
<td> date added </td>
<td> datetime format, 3/3/2017-10/7/2022 </td>
</tr>
<tr>
<td>artists</td>
<td>name of artist associate with song</td>
<td>---</td>
</tr>
<tr>
<td>danceability</td>
<td>how suitable the track is for dancing</td>
<td>float, [0.0,1.0]</td>
</tr>
<tr>
<td>duration_s</td>
<td>duration of track in seconds</td>
<td>float, [0.0,1.0]</td>
</tr>
<tr>
<td>energy</td>
<td>perceptual measure of intensity and activity</td>
<td>float, [0.0,1.0]</td>
</tr>
<tr>
<td>genre</td>
<td>top genre associated with artist of song</td>
<td>---</td>
</tr>
<tr>
<td>genre_list</td>
<td>list of genres associated with artist of song</td>
<td>---</td>
</tr>
<tr>
<td>pitch_class</td>
<td>pitch classes we took from the keys</td>
<td>---</td>
</tr>
<tr>
<td>id</td>
<td>id number associated with song</td>
<td>---</td>
</tr>
<tr>
<td>instrumentalness</td>
<td>predicts likelihood track contains no vocal content</td>
<td>float, [0.0,1.0]</td>
</tr>
<tr>
<td>key</td>
<td>key of track</td>
<td>int, standard Pitch Class notation; [-1 when no value detected,11]</td>
</tr>
<tr>
<td>liveliness</td>
<td>presence of audience in recording</td>
<td>float, [0.0,1.0]</td>
</tr>
<tr>
<td>loudness</td>
<td>overall loudness of track in decibels</td>
<td>float, [-60,0]</td>
</tr>
<tr>
<td>name</td>
<td>name of songs</td>
<td>---</td>
</tr>
<tr>
<td>popularity</td>
<td>how popular a song is</td>
<td>[0.0,100.0]</td>
</tr>
<tr>
<td>speechiness</td>
<td>presence of spoken words in a track</td>
<td>float, [0.0,1.0]</td>
</tr>
<tr>
<td>tempo</td>
<td>tempo of track in beats per minute</td>
<td>float, [0.0,...]</td>
</tr>
<tr>
<td>time_signature</td>
<td>estimated time signature</td>
<td>int, [3,7] indicating "3/4" to "7/4"</td>
</tr>
<tr>
<td>valence</td>
<td>musical positivesness conveyed by a track</td>
<td>float, [0.0,1.0]</td>
</tr>
</tbody>
</table>
</p>
   
 
  
  
<!-- Contact Section -->
  <div class="w3-padding-32 w3-content w3-text-grey" id="contact" style="margin-bottom:64px">
    <h2>Contact Me</h2>
    <hr class="w3-opacity">

    <div class="w3-section">
      <p><i class="fa fa-map-marker fa-fw w3-xxlarge w3-margin-right"></i> San Diego, California, US</p>
      <p><i class="fa fa-phone fa-fw w3-xxlarge w3-margin-right"></i> Phone: +1 9512608344 </p>
      <p><i class="fa fa-envelope fa-fw w3-xxlarge w3-margin-right"> </i> Email: amelianmeyer@gmail.com</p>
    </div>
    
   
  <!-- End Contact Section -->
  </div>  
 
   <!-- Footer. This section contains an ad for W3Schools Spaces. You can leave it to support us. -->
  <footer class="w3-container w3-padding-64 w3-light-grey w3-center w3-opacity w3-xlarge" style="margin:-24px">
    <a class="w3-button w3-round-xxlarge w3-small w3-dark-grey" href="https://ameliameyer.github.io/home/" target="_blank">Return To My Portfolio</a> 
    <br>
    <p class="w3-small">This website was made with HTML and W3schools Spaces.</p>
    <!-- End footer -->
  </footer>
  
<!-- END PAGE CONTENT -->
</div>

<script>
// Open and close sidebar
function openNav() {
  document.getElementById("mySidebar").style.width = "60%";
  document.getElementById("mySidebar").style.display = "block";
}

function closeNav() {
  document.getElementById("mySidebar").style.display = "none";
}
  
var coll = document.getElementsByClassName("collapsible");
var i;

for (i = 0; i < coll.length; i++) {
  coll[i].addEventListener("click", function() {
    this.classList.toggle("active");
    var content = this.nextElementSibling;
    if (content.style.maxHeight){
      content.style.maxHeight = null;
    } else {
      content.style.maxHeight = content.scrollHeight + "px";
    } 
  });
}
</script>

</body>
</html>
